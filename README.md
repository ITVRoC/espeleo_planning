# Espeleorobo planning

This repository contains codes for the high level control of the espeleorobo in V-REP


## Scripts included on this package:
- example_trajectories.py: Generates a example path to be followed by the robot
- dijkstra_trajectories.py: Reads from a txt file a trajectory generated by a Dijkstra Algorithm

## Txt format:
The trajectories written on the files `raj_N.txt` (inside txt_trajectories) must have the number of sampled pioints on the first line. Each of the following lines corresponds to the coordinates `x`, `y` and `z` separated by a `\t`.


## How to interact - vec_field_control.py

This code implements a vetor field method to cenerage input commands to the robot so that it converges to a desired path

**Topics:**
- `/cmd_vel`  (message type:`geometry_msgs/Twist`): Publish a velocity command (forward velocity and an angular velocity)
- `/tf`  (message type:`tf2_msgs/TFMessage`): Subscribe to this topic to get the pose of the robot. Temporary ground truth.
- `/espeleo/traj_points`  (message type:`geometry_msgs/Polygon`): Subscribe to this topic to get a sequence of points representing a path

**Input parameters:**

- `first parameter`:  number of example curve to be generated, from 1 to 3
- `second parameter`:  number of points of the curve to be sampled, 200 for example


**Usage:**

With roscore and vrep running (in this order), run the following launch flie:

`roslaunch espeleo_vrep_simulation basic.launch`

Now, the robot is already waiting for a trajectory to be followed. An example trajectory can be generated with the following command:

`rosrun espeleo_planning example_trajectories.py 1 200`

It will then generate the example curve number 1 with 200 sampled points. The robot must start to follow the curve.


If you want to simulate a trajectory from the Dijkstra Algorithm, which written in a txt file, first load the scenario called campinho.ttt on vrep (it is located on the package espeleo_vrep_simulation). Then, after running the basic.launch command, run the following:

`rosrun espeleo_planning dijkstra_trajectories.py 1`

In which the argument 1 represents the trajectory in file traj_1.txt

